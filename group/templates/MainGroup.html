<!doctype html>
<html lang="en">

<head>
  <style>
    form {
      border: 4px solid black;
      margin: 0 auto;
      padding: 40px;
      width: fit-content;
    }
  </style>
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css"
    integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous" 0>

</head>

<!-- Required meta tags -->
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css"
  integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">

<h1 class="p-3 mb-2 bg-success text-white text-center">iGROW Knowledge Management System</h1>

<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
  integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
  integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
  integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.3/js/bootstrap.min.js"
  integrity="sha384-a5N7Y/aK3qNeh15eJKGWxsqtnX/wWdSZSKp+81YjTmS15nvnvxKHuzaWwXHDli+4" crossorigin="anonymous"></script>

<b>
  <div>
    <ul class="nav nav-tabs justify-content-center" id="myTab" role="tablist">
      <li class="nav-item" role="presentation">
        <a class="nav-link active" id="home-tab" data-bs-toggle="tab" href="{% url 'Home' %}" role="tab"
          aria-controls="home" aria-selected="true">Home</a>
      </li>
      <li class="nav-item" role="presentation">
        <a class="nav-link active" id="sharing-tab" data-bs-toggle="tab" href="{% url 'sharing:MainSharing' %}"
          role="tab" aria-controls="sharing" aria-selected="true">Sharing</a>
      </li>
      <li class="nav-item" role="presentation">
        <a class="nav-link active" id="discussion-tab" data-bs-toggle="tab" href="{% url 'group:MainGroup' %}"
          role="tab" aria-controls="discussion" aria-selected="true">Group</a>
      </li>
      <li class="nav-item" role="presentation">
        <a class="nav-link active" id="friends-tab" data-bs-toggle="tab" href="{% url 'MainMember' %}" role="tab"
          aria-controls="friends" aria-selected="true">Member</a>
      </li>
      <li class="nav-item" role="presentation">
        <a class="nav-link active" id="workshop-tab" data-bs-toggle="tab" href="{% url 'workshop:Workshop' %}"
          role="tab" aria-controls="workshop" aria-selected="true">Workshop</a>
      </li>
      <li class="nav-item" role="presentation">
        <a class="nav-link active" id="sugggestionTag-tab" data-bs-toggle="tab" href="{% url 'TagSuggestion' %}" role="tab" aria-controls="sugggestionTag" aria-selected="true">Suggestion</a>
       </li>
      <li class="nav-item" role="presentation">
        <a class="nav-link active" id="profile-tab" data-bs-toggle="tab" href="{% url 'View' %}" role="tab"
          aria-controls="profile" aria-selected="true">Profile</a>
      </li>
      <li class="nav-item" role="presentation">
        <a class="nav-link active" id="profile-tab" data-bs-toggle="tab" href="{% url 'Logout' %}" role="tab"
          aria-controls="logout" aria-selected="true">Logout</a>
      </li>
      </li>
    </ul>
  </div>
</b>
<br />

{% block content %}
<div class="container">

  <body>
    {% csrf_token %}
    <div class="container my-3 bg-light" style="text-align: center;">
      <label for="exampleFormControlTextarea1" style="font-size: 2em;">Group</label>
    </div>

    <div class="container">
      <a class="btn btn-primary" href="{% url 'group:Group' %}" role="button">New Group</a>
      <!-- <a href="{% url 'group:Group' %}" class="link-primary">New Group</a>  -->
      <a class="btn btn-primary" href="{% url 'group:MyGroup' %}" role="button">My Group</a>
      <!-- <a href="{% url 'group:MyGroup' %}" class="link-primary">My Group</a>  -->
    </div>
    <br />

    {% if context_SoilTags %}
    <div class="container">
      <form method="POST" class="container row g-3" action="{% url 'group:Group_SoilTag' %}">
        {% csrf_token %}
        <div class="container">
          <label for="inputSoil" class="form-label">Soil Tag : </label><br>
          {% for soilTag in context_SoilTags.SoilTags %}
          <input type="radio" name="SoilTag" value="{{ soilTag.id }}">{{ soilTag.SoilTagName }} <br>
          {% endfor %}
        </div>
        <div class="col-12">
          <button type="submit" class="btn btn-success " value="Filter">Filter</button>
        </div>
      </form>
    </div>
    <br/>
    {% elif context_PlantTags %}

    <div class="container">
      <form method="POST" class="container row g-3" action="{% url 'group:Group_PlantTag' %}" attribute>
        {% csrf_token %}
        <div class="container">
          <label for="inputPlant" class="form-label">Plant Tag : </label><br>
          {% for plantTag in context_PlantTags.PlantTags %}
          <input type="radio" name="PlantTag" value="{{ plantTag.id }}">{{ plantTag.PlantTagName }} <br>
          {% endfor %}
        </div>
        <div class="col-12">
          <button type="submit" class="btn btn-success " value="Filter">Filter</button>
        </div>
      </form>
    </div>
    <br />
    {% else %}
    <div class="container">
      <h5>Filter Group By Tags: </h5>
      <a href="{% url 'group:Group_SoilTag' %}" class="link-primary" target="_blank">Enable Soil Tags</a> ||
      <a href="{% url 'group:Group_PlantTag' %}" class="link-primary" target="_blank">Enable Plant Tags</a>

    </div>
    <br />
    {% endif %}

    <form method="POST" class="center">
      {% csrf_token %}

      <br /><br />
      <center>
        <div class="container">
          <div class="row">
            <table border="1" class="table">
              <div class="col-md-6">

                <select id="inputAge" name="Age" required>
                  <option selected disabled=true>--select age class --</option>
                  <option value="Teenagers">Teenagers</option>
                  <option value="Young Adults">Young Adults</option>
                  <option value="Adults">Adults</option>
                  <option value="Senior">Senior</option>
                  <option value="No Age Restriction">No Age Restriction</option>
                </select>
              </div>
              <br />&nbsp;
              <select id="inputLocation" name="State" required>
                <option selected disabled=true>--select state --</option>
                <option>Johor</option>
                <option>Kedah</option>
                <option>Kelantan</option>
                <option>Melaka</option>
                <option>Negeri Sembilan</option>
                <option>Pahang</option>
                <option>Pulau Pinang</option>
                <option>Perak</option>
                <option>Perlis</option>
                <option>Sabah</option>
                <option>Sarawak</option>
                <option>Selangor</option>
                <option>Terengganu</option>
                <option>W.P. Kuala Lumpur</option>
              </select>
              &nbsp;&nbsp;
              <button type="submit" class="btn btn-success " value="Filter">Filter</button>
              <br>
              <br>
          </div>
        </div>
      </center>

    </form>

    {% endblock content %}

    {% block body %}


    <form action="{% url 'group:Group' %}" method="POST" class="center">
      {% csrf_token %}
      {{ form.as_p }}
      <div class="container">
        <div class="row">
          <table class="table caption-top">
            <thead>
              <tr>
                <th scope="col">Name</th>
                <th scope="col">About</th>
                <th scope="col">Media</th>
                <th scope="col">Owner</th>
                <th scope="col">Age Class</th>
                <th scope="col">Location</th>
                <th scope="col">Tagging Details</th>
                <th scope="col">Action</th>

              </tr>
            </thead>
            <tbody>
              {% for group in group %}
              <tr>
                <th scope="row" value="{{ group.Name }}">{{ group.Name }}</th>
                <th scope="row" value="{{ group.About }}">{{ group.About }}</th>
                <th><img src="{{MEDIA_URL}}/{{group.Media}}" width="120" /></th>
                <th scope="row" value="{{ group.Username.Name }}">{{ group.Username.Name }}</a></th>
                <th scope="row" value="{{ group.Age }}">{{ group.Age }}</th>
                <th scope="row" value="{{ group.State }}">{{ group.State }}</th>

                <th>
                  {% if group.soilTagging.all %}
                  <!-- <i>Soil Tagging:</i> -->
                  <i>
                    {% for soilTags in group.soilTagging.all %}
                    {{soilTags.soilTag.SoilTagName}} {% if not forloop.last %},{% endif %}
                    {% endfor %}
                  </i>
                  {% endif %}

                  {% if group.plantTagging.all %}
                  <!-- <i>Plant Tagging:</i> -->
                  <i>
                    {% for plantTags in group.plantTagging.all %}
                    {{plantTags.plantTag.PlantTagName}} {% if not forloop.last %},{% endif %}
                    {% endfor %}
                  </i>
                  {% endif %}
                </th>
                {% if group.Username.Email != request.session.Email %}
                <th>
                  <a href="{% url 'group:JoinGroup' group.id %}" class="card-link">Join</a>
                </th>
                {% else %}
                <th>&nbsp; </th>
                {% endif %}
                <!-- <td>
                    <button type="submit" class="btn btn-success " value="Add">Add</button>
                  </td> -->
              </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
      </div>
    </form>


    {% if messages %}
    <hr />
    {% for msg in messages %}
    <b>{{msg}}</b><br />
    {% endfor %}
    <hr />
    {% endif %}

    {% endblock body %}

  </body>


</div>


<br /><br />

</html>